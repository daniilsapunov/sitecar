{% extends 'carsite/base.html' %}
{% block main%}
{% endblock %}
{% block 1%}
{% endblock %}

{% block body %}

<style>
    .reply-window {
        display: none;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 10px;
    }

    .reply-window textarea {
        width: 100%;
        resize: vertical;
        min-height: 60px;
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .reply-window .submit-button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 8px 12px;
        cursor: pointer;
        border-radius: 4px;
    }
</style>

<h2>Comments</h2>
<ul>
    {% for comment in topic.comments.all %}
    <li>{{ comment.body }} - Posted by {{ comment.author }} on {{ comment.created }}</li>
    <ul>
        {% for child_comment in comment.child_comments.all %}
        <li>{{ child_comment.text }} - Posted by {{ child_comment.author }} on {{ child_comment.created_at }}</li>
        {% endfor %}
    </ul>
    <form action="{% url 'carsite:child-comment-create' comment_id=comment.id %}" method="post" id="comment-form-{{ comment.id }}">
        {% csrf_token %}
        <a class="reply-link" onclick="toggleReplyWindow('{{ comment.id }}')">Reply</a>
        <div class="reply-window" id="reply-window-{{ comment.id }}">
            <textarea name="text" id="text-{{ comment.id }}" cols="30" rows="10" placeholder="Write your reply here..."></textarea>
            <button class="submit-button" onclick="submitReply('{{ comment.id }}')">Post Reply</button>
        </div>
    </form>
    {% endfor %}
</ul>

<script>
    function toggleReplyWindow(commentId) {
        var replyWindow = document.getElementById('reply-window-' + commentId);
        replyWindow.style.display = replyWindow.style.display === 'none' ? 'block' : 'none';
    }

    function submitReply(commentId) {
        var replyTextarea = document.getElementById('text-' + commentId);
        var replyText = replyTextarea.value;
        // Perform necessary actions to submit the reply to the server
        // ...
        // Clear the input field after submission
        replyTextarea.value = '';
    }
</script>

</ul>
Коммент
<form action="{% url 'carsite:comment-create' topic.id %}" method="post">
    {% csrf_token %}
    <label for="body">Comment:</label>
    <textarea name="body" id="body" cols="30" rows="10"></textarea>
    <input type="submit" value="Post Comment">
</form>


{% endblock %}
